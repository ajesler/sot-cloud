<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Clouds</title>

		<meta name="author" content="Andrew Esler">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

<!-- 
SUMMARY
This presentation explains cloud computing, and covers designing and using cloud services.

NOTES
http://www.cs.columbia.edu/~roxana/teaching/COMS-E6998-7-Fall-2011/papers/armbrust-tr09.pdf
http://amy.palamounta.in/2012/10/26/ten-traumas-in-ten-minutes/

EXPAND
State is bad - give concrete examples
Privacy slide needs more info / examples
-->

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

<section>
	<h1>The Cloud</h1>
</section>

<section>
	<h2>latest tech fad?</h2>
</section>

<section data-transition="fade">
	<blockquote cite="http://www.technologyreview.com/news/425623/the-cloud-imperative/">
		&ldquo;Computing may someday be organized as a public utility just as the telephone system is a public utility, each subscriber needs to pay only for the capacity he actually uses, but he has access to all programming languages characteristic of a very large system&rdquo;
	</blockquote>

	<br />

	<blockquote cite="http://www.technologyreview.com/news/425623/the-cloud-imperative/">
		&ldquo;The computer utility could become the basis of a new and important industry.&rdquo;
	</blockquote>

	<br />

	<p>John McCarthy</p>
</section>

<section data-transition="fade">
	<h1>1961</h1>
	<aside class="notes">
		The year of John McCarthy's speech.
	</aside>
</section>

<section data-transition="fade">
	<h2>29 October, 1969</h2>
	<aside class="notes">
        The date two nodes of what would go on to become APRANET were connected. 
    </aside>
</section>

<section>
	<h2>1997</h2>
	<p>Term "cloud computing" first used by Professor Ramnath Chellappa</p>
</section>

<section>
	<h2>Characteristics</h2>

	<ul>
		<li class="fragment">On demand self service</li>
		<li class="fragment">Broad network access</li>
		<li class="fragment">Resource pooling</li>
		<li class="fragment">Rapid elasticity</li>
		<li class="fragment">Measured service</li>
	</ul>

	<p class="fragment"><small>
		Using the <a href="www.nist.gov" title="National Institute of Standards and Technology">NIST</a> <a href="http://csrc.nist.gov/publications/nistpubs/800-145/SP800-145.pdf">definition</a> of cloud computing
	</small></p>
</section>

<section>
	<h2>Resources on demand!</h2>
</section>

<section>
	<h3>Resources?</h3>

	<ul>
		<li class="fragment">Compute</li>
		<li class="fragment">Storage</li>
		<li class="fragment">Network</li>
		<li class="fragment">Telephony</li>
		<li class="fragment">Queueing, Caching, Database, etc...</li>
	</ul>
</section>

<section>
	<h3>*aaS's</h3>
	<ul>
		<li class="fragment">SaaS</li>
		<li class="fragment">PaaS</li>
		<li class="fragment">IaaS</li>
	</ul>
	 <aside class="notes">
        Service models

		IaaS: Google Compute Cloud, Amazon EC2, Microsoft Azure, Rackspace Cloud, GoGrid
		PaaS: VMWare CloudFoundry, Google App Engine, Amazon Elastic Beanstalk, Force.com, Redhat Openshift, Heroku, Cloud Services for Windows Azure
		SaaS: Google Apps, Zendesk, Twilio
    </aside>
</section>

<section>
	<h2>Why is cloud computing popular?</h2>
</section>

<section data-transition="fade">
	<h3>Agility</h3>
	<aside class="notes">
		Enables rapid prototyping and experimentation
		You want to benchmark a ten node cluster? Go for it. $20 an hour or less.
	</aside>
</section>

<section data-transition="fade">
	<h3>Reduces costs</h3>
	<aside class="notes">
		No need to purchase hardware prior to a project.
		You don't need to know how much capacity you need up front.
		May reduce staff, admin, and licensing costs.
	</aside>
</section>

<section data-transition="fade">
	<h3>Elasticity</h3>
	<aside class="notes">
		Scale to cope with variable workloads
		No need to spend money on resources that are only there to handle peak loads
		Autoscaling - avoid the slashdot effect without human intervention.
	</aside>
</section>

<section>
	<h2>For developers</h2>
	<aside class="notes">
		
	</aside>
</section>

<section data-transition="fade">
	<h3>Instant Resources!</h3>
</section>

<section data-transition="fade">
	<h3>Automatable</h3>
	<aside class="notes">
		Have an idea you want to test? Go for it.
		Cloud services tend to have good APIs.
		Continuous [Build, Test, Deploy]
		As simple as git push - you will do this in the demo.
	</aside>
</section>

<section data-transition="fade">
	<h3>$ knife st env start test</h3>
	<aside class="notes">
		This is all it takes to start the entire test environment of 3 app servers and 3 datastore servers, as well as copy the latest backup from production, and run the latest configuration on each node.
	</aside>
</section>

<section>
	<h2>For Students</h2>
</section>

<section data-transition="fade">
    <h3>Free usage</h3>
    <aside class="notes">
        Many providers (eg AWS, Heroku) have free tiers or initial credit you can experiment with.
        Students can sometimes get educational credit.
        Report bugs for fun and profit! Eg $20 twilio credit for reorting a doc mistake.
    </aside>
</section>

<section data-transition="fade">
    <h3>Unexpected features</h3>
    <aside class="notes">
        Often worth exploring features as there can be some interesting side benefits. For example, you can host a static website on both GitHub and S3.
    </aside>
</section>

<section>
	<h2>Architecting for the Cloud</h2>
</section>

<section data-transition="fade">
	<h3>Individual components fail!</h3>
</section>

<section data-transition="fade">
	<h3>Expect this and design for it</h3>
	<aside class="notes">
		If your design is good, your response will be "Meh."
	</aside>
</section>

<section data-transition="fade">
	<h3>Redundancy</h3>
	<aside class="notes">
		Things fail. Have spares that take over automatically.
		You have unlimited* resources, use them. On demand even.
	</aside>
</section>

<section data-transition="fade">
	<h3>Fault Tolerance</h3>
	<aside class="notes">
		What happens when a service goes down?
		When a node dies
		Example is Cassandra datastore. Gossip protocol - bad node backoff. Can be re-added later with no issues. 
	</aside>
</section>

<section data-transition="fade">
	<h3>SPOF</h3>
	<aside class="notes">
		Think carefully about the things that can go wrong between clients and you.
		Can turn up in some unexpected places.
		What can break between you and the consumer? How can you mitigate the risk or deal with it when it happens?
		eg GoDaddy DNS issue - spidertracks.com did not resolve. Website was working fine. Customer doesnt care - they know they cant access your site but they can access google - therefore internet is fine and it is a problem with you.
	</aside>
</section>

<section data-transition="fade">
	Your cloud services providers is a single point of failure.

	<aside class="notes">
		If your provider fails, what are you going to do about it? Generally, nothing.

		Cloud providers will fail. Split your resources usage between data centers and providers if appropriate.

		* AWS, AppEngine, and Gmail have all had outages.

		* Megaupload - established 2005, seized Jan 2012, allegedly dedicated to copyright infringement. Still unresolved. Paying customers lost data.

		* Lavabit - An encrypted mail service shut down by operator last week, because they did not want to "become complicit in crimes against the American people". Cannot legally say why.
	</aside>
</section>

<section data-transition="fade">
	<h3>Scalability</h3>
	<aside class="notes">
		Your design needs to be scalable horizontally to take full advantage of the cloud. 
		Add and remove resources as required without having to restart / redeploy.
		State is bad, cluster aware are good.
	</aside>
</section>

<section data-transition="fade">
	<h3>m1.xlarge</h3>
	<p>to</p>
	<h3>m2.4xlarge</h3>
	<aside class="notes">
		AWS EC2 allows scaling vertically by changing the node type. If your infrastructure is automated, this is easy!

		vCPU,	ECU,	Memory (GiB),	Instance Storage (GB)
		General purpose	 m1.xlarge	 64-bit	 
			4	 8	 15	 	4 x 420
		Memory optimized m2.4xlarge	 64-bit	 
			8	 26	 68.4	2 x 840
	</aside>
</section>

<section data-transition="fade">
	<h3>State is bad!</h3>
	<aside class="notes">
		The next request from a client may not be serviced by the same machine. 
	</aside>
</section>

<section data-transition="fade">
	<h3>Partition and Cache data</h3>
	<aside class="notes">
		"Cloud scale" data does not fit on one node. It might at the start, but it wont forever. Design for this. 
		Eg cassandra. redundancy in database storage.
	</aside>
</section>

<section>
	<h2>Downsides to the cloud</h2>
	<aside class="notes">
		
	</aside>
</section>

<section data-transition="fade">
	<h3>Transient errors</h3>
	<aside class="notes">
		Things fail. Sometimes for no apparent reason. 
	</aside>
</section>

<section data-transition="fade">
	<h3>Vendor lock in</h3>
	<aside class="notes">
		
	</aside>
</section>

<section data-transition="fade">
	<blockquote cite="http://amy.palamounta.in/2012/10/26/ten-traumas-in-ten-minutes/">
		&ldquo;If you dont own it, abstract away the details.&rdquo;
	</blockquote>
	<p><a href="http://www.twitter.com/ammeep">@ammeep</a> at <a href="http://www.codemania.co.nz">Code Mania</a> After Dark</p>
	<aside class="notes">
        There are libraries that will abstract away a particular cloud provider. Eg Fog, a Ruby gem. 
        Abstraction not always easy when different feature sets are involved.
        Interface for your system to use + provider specific implementations. Many cloud service providers provide their client jars for different languages. 
        Example: Abstraction of messaging provider in GO. 
    </aside>
</section>

<section data-transition="fade">
    <h3>Configuration</a>
    <aside class="notes">
        Developers may end up doing operations tasks. Installing and configuring software. How do you know you are doing it right and not leaving gaping holes in your infrastructure or creating performance problems?
    </aside>
</section>

<section data-transition="fade">
	<h3>Cutting Edge</h3>
    <aside class="notes">
        You may not have a full understanding of your dependencies before it goes live.

        Be careful with cutting edge technology. You will most likely get cut at some point. What if it gets abandoned by everyone else or a competitor becomes more popular?

        Chose an appropriate tool/service for the task, not the latest fad. Be able to justify your choice against similar tools/services.
    </aside>
</section>

<section>
    <h2>Backups and Recovery</h2>
    <aside class="notes">
        Have a plan and test it regularly. How do you know all your nodes are being backed up?
    </aside>
</section>

<section data-transition="fade">
    <h2>Security</h2>
    <aside class="notes">
        Does your industry have any requirements about how data can be stored? HIPAA, etc. Do you have to provide an audit trail?
		Are you allowed to store it offshore / in an unknown place?

		Govt clouds - dif to normal clouds how?

		Do you trust the cloud service provider to get it right? Encrypt data?
    </aside>
</section>

<section>
	<h2>Privacy</h2>
	<aside class="notes">
		USA Patriot act allows us govt to request data from US based companies.

	PRISM - cooperation of google, microsoft, yahoo, etc in making data available to US govt. Metadata != data?
	</aside>
</section>

<section>
	How do you test the cloud?

	Test locally as much as possible.
	Unit tests, obviously.

	<p class="fragment">Simian Army</p>
	<div class="fragment">
		<a href="https://github.com/Netflix/SimianArmy">Simian Army</a> on GitHub
		<a href="http://techblog.netflix.com/2011/07/netflix-simian-army.html">Neflix explains the Simian Army</a>
	</div>

	<aside class="notes">
		Simian army is a set of programs that can be run against your AWS infrastructure.
		Doctor checks health of nodes. 
		Janitor - removes unused resources. 
		Conformity - ensures best practices are used 
		Latency - simlates latency on services
		Security - violations or vulnerabilities
		Chaos Monkey randomly terminates instances.
		Chaos Gorilla kills an entire availability zone. 

		Netflix has opensourced a lot of software, much of it related to AWS and java. 
	</notes>
</section>

<section>
	A lot of cloud providers have APIs. 
	You may be able to test with an integrated API console, eg twilio

	Testing against cloud providers when using webhooks require your machine is internet addressable. 
	Solutions:
		- localtunnel and its ilk
		- Use ssh to pipe traffic between local machine and a machine that is already internet addressable. 

	Running an application on your local machine means it is easier to debug and monitor what is happening. 
</section>

<section>
	Monitoring
	 
	Now your cloud application is up and running, how do you keep an eye on its health?

	Lots of standard monitoring tools. Many providers also provide there own monitoring systems.

	Dashboards are good. Graphs / Metrics should provide an easy to read view of system health. 
	Log aggregation - this is important. Dont leave logs sitting on the node. What happens if it bugs out and crashes, corrupting drive. You will never find out what happened. Fortunately, you can just start a new node, but its nice to know what failed. 
	
	Design with logging in mind. Where will logs go? How long will they be kept for?
	How can they be accessed? Are they searchable?

	Cloud means that many different machines may be involved in the handling of a request / action. It pays to be able to follow the processing through. 

	Spidertracks uses log4j + graylog. Provides searching and real time monitoring of logs. Logs are also archived long term in Amazon S3. 

	Dont leave this till after your application is live to figure out!

	Different priorities of logging. Some entries only relevant for a short time, some relevant forever, eg audit trail of user actions. Great help to support when you can say exactly what a user did and when. 

	Set up email / sms alerts. Get told as soon as something funky happens, dont wait to be told by customers. 
</section>

<section>
	Diagnostics / Remote monitoring. 

	Probably a separate category from monitoring. 
	JMX, custom admin dashboards. Actions on the system or individual node. 
	How do you remote debug? Think about this before you deploy. If you have a bug you cannot reproduce locally, then sometimes access to prod / stage can be very helpful. 

	Script all the things! knife can be very useful for certain tasks. 
</section>

<section>
	Have a staging and/or test environment. Even if it doesnt run continuously. Having somewhere to test changes on a live system is very helpful. Automate creation/starting/stopping of test/stage.
</section>

<section>
	<h1>DEMO TIME</h1>
</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: false,
				history: true,
				center: true,

				theme: 'default', // available themes are in /css/theme
				transition: 'concave', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
